// Add job
// Edit job
$(".btn-add-job").on("click",function(t){t.preventDefault(),$(this).prop("disabled",!0)
var e=$("form.add-job"),a=new Object,r=$('input[name="collection"]').val()
$(".tab-pane.active",e).each(function(){var t=$(this),e=new Object
e.type=t.data("type"),$("input, textarea, select",t).each(function(){$(this).attr("name")&&("checkbox"==$(this).attr("type")?e[$(this).attr("name")]=$(this).attr("checked")?1:0:e[$(this).attr("name")]=$(this).val())}),a[t.data("part")]=e}),$.ajax({url:baseURL+"api/input/"+r,data:JSON.stringify(a),method:"PUT",headers:{Accept:"application/json",Authorization:authHeader},success:function(t){window.location=baseURL+"api/admin/jobs"},error:function(t){if($(".btn-add-job").prop("disabled",!1),405!=t.status){var e=JSON.parse(t.responseText)
e.error&&e.error.message&&($(".error .text").html(e.error.message),$(".error").removeClass("hide").show().focus())}else window.location=baseURL+"api/admin/jobs"}})}),$(".btn-edit-job").on("click",function(t){t.preventDefault(),$(this).prop("disabled",!0)
var e=$("form.edit-job"),a=new Object,r=$('input[name="collection"]').val()
$(".tab-pane",e).each(function(){var t=$(this),e=t.attr("id"),r=new Object
r.type=t.data("type"),$("input, textarea, select",t).each(function(){$(this).attr("name")&&("checkbox"==$(this).attr("type")?r[$(this).attr("name")]=$(this).attr("checked")?1:0:r[$(this).attr("name")]=$(this).val())}),a[e]=r}),$.ajax({url:baseURL+"api/input/"+r,data:JSON.stringify(a),method:"POST",headers:{Accept:"application/json",Authorization:authHeader},success:function(t){window.location=baseURL+"api/admin/jobs"},error:function(t){if($(".btn-edit-job").prop("disabled",!1),405!=t.status){var e=JSON.parse(t.responseText)
e.error&&e.error.message&&($(".error .text").html(e.error.message),$(".error").removeClass("hide").show().focus())}else window.location=baseURL+"api/admin/jobs"}})})
